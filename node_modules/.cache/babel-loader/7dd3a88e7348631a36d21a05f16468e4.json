{"ast":null,"code":"import { ADD_BOOK, DELETE_BOOK, UPDATE_BOOK } from '../types'; // const initialState = {booksArray: [{id: 0, name: 'Lord of the flies', price: 12.00, category: 'dystopian'}]};\n\nconst initialState = {\n  booksArray: []\n};\n\nfunction nextBookId(booksArray) {\n  const maxId = booksArray.reduce((maxId, booksArray) => Math.max(booksArray.id, maxId), -1);\n  return maxId + 1;\n}\n\nexport default function (state = initialState, action) {\n  console.log(\"Book state = \" + JSON.stringify(action.type));\n\n  switch (action.type) {\n    case ADD_BOOK:\n      console.log(\"Book in reducer \" + JSON.stringify([...state.booksArray, {\n        id: nextBookId(state.booksArray),\n        name: action.payload.name,\n        price: action.payload.price,\n        category: action.payload.category\n      }]));\n      console.log(\"Book inbnm,, \" + JSON.stringify(...state.booksArray));\n      return { ...state,\n        booksArray: [...state.booksArray, {\n          id: nextBookId(state.booksArray),\n          name: action.payload.name,\n          price: action.payload.price,\n          category: action.payload.category\n        }]\n      };\n\n    case UPDATE_BOOK:\n      const index = action.payload.id; // const newState = [ ...state.booksArray ];\n      // newState[index] = { ...state.booksArray[index], booksArray: !newState[index].booksArray };\n\n      console.log('action.payload ' + JSON.stringify(action.payload));\n      let booksArr = [...state.booksArray];\n      console.log('booksArr ' + JSON.stringify(booksArr));\n\n      if (action.payload.name !== '') {\n        booksArr[index].name = action.payload.name;\n      } else {\n        booksArr[index].name = booksArr[index].name;\n      }\n\n      if (action.payload.price > 0) {\n        booksArr[index].price = action.payload.price;\n      } else {\n        booksArr[index].price = booksArr[index].price;\n      }\n\n      if (action.payload.category !== '') {\n        booksArr[index].category = action.payload.category;\n      } else {\n        booksArr[index].category = booksArr[index].category;\n      } // let updatedBook =booksArr.find(obj => obj.id === action.payload.id);\n      // console.log('updatedBook '+ JSON.stringify(updatedBook));\n      // booksArr[updatedBookIndex].name = action.payload.name;\n      // booksArr[updatedBookIndex].price = action.payload.price;\n      // booksArr[updatedBookIndex].category = action.payload.category;\n      // console.log('NewbooksArr '+ JSON.stringify(booksArr[updatedBookIndex].name));\n\n\n      return { ...state,\n        booksArray: booksArr\n      };\n\n    case DELETE_BOOK:\n      let books = [...state.booksArray];\n      let newBooksArr = books.filter(book => book !== action.payload);\n      console.log(\"newBooksArr \" + JSON.stringify(newBooksArr));\n      return { ...state,\n        booksArray: newBooksArr\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["C:/Mary/projects/book-list-react-redux/src/redux/reducers/bookslist.reducer.js"],"names":["ADD_BOOK","DELETE_BOOK","UPDATE_BOOK","initialState","booksArray","nextBookId","maxId","reduce","Math","max","id","state","action","console","log","JSON","stringify","type","name","payload","price","category","index","booksArr","books","newBooksArr","filter","book"],"mappings":"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","sourcesContent":["import { ADD_BOOK, DELETE_BOOK, UPDATE_BOOK } from '../types';\r\n\r\n\r\n// const initialState = {booksArray: [{id: 0, name: 'Lord of the flies', price: 12.00, category: 'dystopian'}]};\r\nconst initialState = {booksArray: []};\r\n\r\nfunction nextBookId(booksArray) {\r\n    const maxId = booksArray.reduce((maxId, booksArray) => Math.max(booksArray.id, maxId), -1)\r\n    return maxId + 1\r\n}\r\n\r\n\r\nexport default function(state = initialState, action) {\r\n    console.log(\"Book state = \" + JSON.stringify(action.type));\r\n    switch(action.type) {\r\n        case ADD_BOOK: \r\n            console.log(\"Book in reducer \" + JSON.stringify([ ...state.booksArray, {id: nextBookId(state.booksArray),\r\n            name: action.payload.name, price: action.payload.price, category: action.payload.category}]  ));\r\n            console.log(\"Book inbnm,, \" + JSON.stringify(...state.booksArray));\r\n          \r\n            return {\r\n                ...state, \r\n                booksArray: [ ...state.booksArray, {id: nextBookId(state.booksArray),\r\n                name: action.payload.name, price: action.payload.price, category: action.payload.category}]  }\r\n    \r\n        case UPDATE_BOOK: \r\n        const index = action.payload.id;\r\n    // const newState = [ ...state.booksArray ];\r\n    // newState[index] = { ...state.booksArray[index], booksArray: !newState[index].booksArray };\r\n        console.log('action.payload '+ JSON.stringify(action.payload));\r\n        let booksArr =  ([ ...state.booksArray]);\r\n        console.log('booksArr '+ JSON.stringify(booksArr));\r\n        if (action.payload.name !== '') {\r\n            booksArr[index].name = action.payload.name\r\n\r\n        } else {\r\n            booksArr[index].name =  booksArr[index].name\r\n        }\r\n        if (action.payload.price > 0 ) {\r\n            booksArr[index].price = action.payload.price\r\n\r\n        } else {\r\n            booksArr[index].price = booksArr[index].price\r\n        }\r\n        if (action.payload.category !== '') {\r\n            booksArr[index].category = action.payload.category\r\n\r\n        } else {\r\n            booksArr[index].category = booksArr[index].category\r\n        }\r\n        // let updatedBook =booksArr.find(obj => obj.id === action.payload.id);\r\n        // console.log('updatedBook '+ JSON.stringify(updatedBook));\r\n        // booksArr[updatedBookIndex].name = action.payload.name;\r\n        // booksArr[updatedBookIndex].price = action.payload.price;\r\n        // booksArr[updatedBookIndex].category = action.payload.category;\r\n        // console.log('NewbooksArr '+ JSON.stringify(booksArr[updatedBookIndex].name));\r\n\r\n             return {\r\n                ...state,\r\n                booksArray: booksArr }    \r\n            \r\n        case DELETE_BOOK:\r\n            let books =  ([ ...state.booksArray])\r\n            let newBooksArr = books.filter(book => book !== action.payload);\r\n          console.log(\"newBooksArr \" + JSON.stringify(newBooksArr));\r\n            return {\r\n                 ...state, \r\n                 booksArray: newBooksArr\r\n            }\r\n\r\n             default: \r\n            return state;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}